<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Imageflow</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="riapi_reference.html"><strong aria-hidden="true">2.</strong> RIAPI Reference</a></li><li class="chapter-item expanded "><a href="json_api_reference.html"><strong aria-hidden="true">3.</strong> JSON API Reference</a></li><li class="chapter-item expanded "><a href="imageflow_tool.html"><strong aria-hidden="true">4.</strong> Using imageflow_tool</a></li><li class="chapter-item expanded "><a href="imageflow_server.html"><strong aria-hidden="true">5.</strong> Using imageflow_server</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                    </div>

                    <h1 class="menu-title">Imageflow</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                    </div>
                </div>

                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<ul>
<li>Imageflow can be used as a library (libimageflow or <a href="https://github.com/imazen/imageflow-dotnet">imageflow-dotnet</a>)</li>
<li>Imageflow can be used as a command-line tool for scripting (<a href="imageflow_tool.html">imageflow_tool</a>)</li>
<li>Imageflow can be used as an HTTP server (<a href="imageflow_server.html">imageflow_server</a>)</li>
</ul>
<p>All share support for the querystring API (<a href="riapi_reference.html">RIAPI</a>). 
libimageflow, imageflow-dotnet, and imageflow_tool currently support the <a href="json_api_reference.html">JSON API</a>.</p>
<p>The querystring API is much simpler, but the JSON API can compose multiple images or generate multiple image 
versions in a single job. You can also use the querystring API from within the JSON API. </p>
<h1><a class="header" href="#riapi-querystring-reference" id="riapi-querystring-reference">RIAPI (querystring) Reference</a></h1>
<h1><a class="header" href="#basic-commands" id="basic-commands">Basic commands</a></h1>
<style type="text/css">
.lineup img {vertical-align:top;}
</style>
<h2><a class="header" href="#width--height" id="width--height">Width &amp; Height</a></h2>
<p>You can set bounds for an image with the <code>width</code> and/or <code>height</code> commands. How those bounds are interpreted is determined by the <code>mode</code> and <code>scale</code> commands. If only <code>width</code> <em>or</em> <code>height</code> is specified, aspect ratio is maintained.</p>
<h3><a class="header" href="#fit-mode" id="fit-mode">Fit Mode</a></h3>
<ul>
<li><code>stretch</code> distorts the image to be exactly the given dimensions, if <code>scale=both</code>. If <code>scale=down</code> (the default), the image is only scaled if <code>width</code> and <code>height</code> are smaller than the image. </li>
<li><code>pad</code> scales the image to fit within <code>width</code> and <code>height</code>, then pads 2 edges (<code>bgcolor</code>) to make it </li>
</ul>
<h2><a class="header" href="#scaledownbothcanvas" id="scaledownbothcanvas">Scale=down|both|canvas</a></h2>
<p><strong>By default, images are <em>not</em> enlarged</strong> - the image stays its original size if you request a larger size.</p>
<p>To allow both reduction and enlargement, use <code>scale=both</code>. Image enlargement causes blurriness and should be avoided. <code>scale=canvas</code> is another option. The image never gets upscaled, but the canvas is expanded to fill the desired area.</p>
<p>Here we attempt to upscale an image using <code>scale=down</code>, <code>scale=both</code>, and <code>scale=canvas</code> respectively.</p>
<img src="https://z.zr.io/ri/tractor-tiny.jpg;width=150;scale=down" style="border: 1px solid gray" />
<img src="https://z.zr.io/ri/tractor-tiny.jpg;width=150;scale=both" style="border: 1px solid gray"  />
<img src="https://z.zr.io/ri/tractor-tiny.jpg;width=150;scale=canvas" style="border: 1px solid gray"  />
<p>You can <a href="/plugins/defaultsettings">change the default behavior from <code>scale=down</code> to something else with the DefaultSettings plugin</a>.</p>
<h2><a class="header" href="#alignment" id="alignment">Alignment</a></h2>
<p>So, you don't like images being centered when you use <code>mode=crop</code>, <code>mode=pad</code>, or <code>scale=canvas</code>? You can pick the alignment type with the <code>anchor</code> command. </p>
<p>Valid values are <code>topleft</code>, <code>topcenter</code>, <code>topright</code>, <code>middleleft</code>, <code>middlecenter</code>, <code>middleright</code>, <code>bottomleft</code>, <code>bottomcenter</code>, and <code>bottomright</code>.</p>
<p>Mode=Crop, Anchor=Topleft: <img src="https://z.zr.io/ri/zermatt.jpg;w=100;h=100;mode=crop;anchor=topleft" alt="" />
Anchor=bottomright: <img src="https://z.zr.io/ri/zermatt.jpg;w=100;h=100;mode=crop;anchor=bottomright" alt="" /></p>
<p>Mode=Pad, Bgcolor=gray, Anchor=Topleft: <img src="https://z.zr.io/ri/zermatt.jpg;w=100;h=100;bgcolor=gray;anchor=topleft" alt="" />
Anchor=bottomright: <img src="https://z.zr.io/ri/zermatt.jpg;w=100;h=100;bgcolor=gray;anchor=bottomright" alt="" /></p>
<p>Scale=canvas, bgcolor=gray, Anchor=Topleft: <img src="https://z.zr.io/ri/tractor-tiny.jpg;w=150;bgcolor=gray;scale=canvas;anchor=topleft" alt="" /></p>
<h2><a class="header" href="#formats--compression" id="formats--compression">Formats &amp; compression</a></h2>
<p>Set <code>format=jpg</code>, <code>format=gif</code>, or <code>format=png</code> to force a particular output format. By default, the original format (or the closest match) is used; however, you can convert <em>any</em> format file to <em>any</em> other file, maintaining transparency, IF the <a href="/plugins/prettygifs">PrettyGifs plugin</a> is installed.</p>
<p>Adjust jpeg compression with the <code>quality=0..100</code> command. The default is 90, an excellent tradeoff between size and perfection. </p>
<h2><a class="header" href="#background-color" id="background-color">Background color</a></h2>
<p>Dislike white? Transparent padding is added (when required) for PNGs and GIFs, but jpegs don't support transparency.</p>
<p>Add <strong>bgcolor=name</strong> or <strong>bgcolor=33ddff</strong> to set the background (matte) color. Named colors and hex values supported.</p>
<img src="https://z.zr.io/ri/quality-original.jpg;w=100;h=100;bgcolor=33ddff" />
<h2><a class="header" href="#cropping" id="cropping">Cropping</a></h2>
<p>The URL syntax for cropping is <code>&amp;crop=x1,y1,x2,y2</code>. The coordinates are relative to the top-left corner of the original image - if they are positive values.</p>
<p>If X2 or Y2 are 0 or less, they are relative to the bottom-right corner. This allows easy trimming without knowing the size of the image.</p>
<p>For example, crop=0,0,0,0 leaves the image uncropped. crop=10,10,-10,-10 removes 10 pixels from all edges of the image.</p>
<p>In addition, you can specify <code>cropxunits</code> and <code>cropyunits</code>. Setting them to 100 allows you to crop by percentage. Example which crops 10% off each edge: <code>?cropxunits=100&amp;cropyunits=100&amp;crop=10,10,90,90</code>. Setting them to the width/height of the display image allows you to crop in display coordinates, without needing to know the original size of the image.</p>
<h2><a class="header" href="#back-to-cooler-stuff" id="back-to-cooler-stuff">Back to cooler stuff...</a></h2>
<p>The following filters require the <a href="/plugins/simplefilters">SimpleFilters plugin</a>, part of the Creative edition.</p>
<p><img src="https://z.zr.io/ri/utah2.jpg;width=200" alt="Original image" /></p>
<h3><a class="header" href="#4-ways-to-grayscale" id="4-ways-to-grayscale">4 ways to grayscale</a></h3>
<p><code>s.grayscale</code>=<code>true|y|ry|ntsc|bt709|flat</code>  (true, ntsc, and y produce identical results)</p>
<p>The following examples use NTSC/Y/True, RY, BT709, and Flat respectively</p>
<p><img src="https://z.zr.io/ri/utah2.jpg;width=200;s.grayscale=true" alt="s.grayscale=true" />
<img src="https://z.zr.io/ri/utah2.jpg;width=200;s.grayscale=ry" alt="s.grayscale=ry" />
<img src="https://z.zr.io/ri/utah2.jpg;width=200;s.grayscale=bt709" alt="s.grayscale=bt709" />
<img src="https://z.zr.io/ri/utah2.jpg;width=200;s.grayscale=flat" alt="s.grayscale=flat" /></p>
<h3><a class="header" href="#1-way-to-sepia" id="1-way-to-sepia">1 way to sepia</a></h3>
<p><img src="https://z.zr.io/ri/utah2.jpg;width=200;s.sepia=true" alt="s.sepia=true" /></p>
<h3><a class="header" href="#inversion" id="inversion">Inversion</a></h3>
<p><img src="https://z.zr.io/ri/utah2.jpg;width=200;s.invert=true" alt="s.invert=true" /></p>
<h3><a class="header" href="#adjust-opacityalpha" id="adjust-opacityalpha">Adjust opacity/alpha</a></h3>
<p><code>s.alpha</code>= <code>0..1</code></p>
<p>For true transparency, combine with <code>format=png</code>. Otherwise, the image will be blended against <code>bgcolor</code>.</p>
<p><img src="https://z.zr.io/ri/utah.jpg;width=200;s.alpha=0.25" alt="s.alpha=0.25" />
<img src="https://z.zr.io/ri/utah.jpg;width=200;s.alpha=0.75" alt="s.alpha=0.75" />
<img src="https://z.zr.io/ri/utah.jpg;width=200;s.alpha=0.85" alt="s.alpha=0.85" />
<img src="https://z.zr.io/ri/utah.jpg;width=200;s.alpha=1" alt="s.alpha=1" /></p>
<h3><a class="header" href="#adjust-contrast" id="adjust-contrast">Adjust contrast</a></h3>
<p><code>s.contrast</code>= <code>-1..1</code></p>
<p><img src="https://z.zr.io/ri/utah.jpg;width=200;s.contrast=-0.99" alt="s.contrast=-0.80" />
<img src="https://z.zr.io/ri/utah.jpg;width=200;s.contrast=-0.80" alt="s.contrast=-0.80" />
<img src="https://z.zr.io/ri/utah.jpg;width=200;s.contrast=-0.40" alt="s.contrast=-0.40" />
<img src="https://z.zr.io/ri/utah.jpg;width=200;s.contrast=-0.20" alt="s.contrast=-0.20" /></p>
<p><img src="https://z.zr.io/ri/utah.jpg;width=200;s.contrast=0" alt="s.contrast=0" /></p>
<p><img src="https://z.zr.io/ri/utah.jpg;width=200;s.contrast=0.20" alt="s.contrast=0.20" />
<img src="https://z.zr.io/ri/utah.jpg;width=200;s.contrast=0.40" alt="s.contrast=0.40" />
<img src="https://z.zr.io/ri/utah.jpg;width=200;s.contrast=0.80" alt="s.contrast=0.80" />
<img src="https://z.zr.io/ri/utah.jpg;width=200;s.contrast=0.99" alt="s.contrast=0.99" /></p>
<h3><a class="header" href="#adjust-brightness" id="adjust-brightness">Adjust brightness</a></h3>
<p><code>s.brightness</code>= <code>-1..1</code></p>
<p><img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.brightness=-1" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.brightness=-0.7" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.brightness=-0.5" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.brightness=-0.2" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.brightness=0" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.brightness=0.2" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.brightness=0.5" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.brightness=0.7" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.brightness=1" alt="" /></p>
<h3><a class="header" href="#adjust-saturation" id="adjust-saturation">Adjust saturation</a></h3>
<p><code>s.saturation</code>= <code>-1..1</code></p>
<p><img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.saturation=-1" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.saturation=-0.9" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.saturation=-0.5" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.saturation=-0.2" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.saturation=0" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.saturation=0.2" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.saturation=0.5" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.saturation=0.9" alt="" />
<img src="https://z.zr.io/ri/red-leaf.jpg;width=100;s.saturation=1" alt="" /></p>
<h1><a class="header" href="#full-command-reference" id="full-command-reference">Full command reference</a></h1>
<p>Full Command Reference</p>
<p>Rotation &amp; flipping
autorotate=true Automatically rotates the image based on the EXIF info from the camera. autorotate.default=true will only autorotate if the image is processed.
sflip=none|x|y|xy Flips the source image prior to processing (new in V3.1).
srotate=0|90|180|270 Rotates the source image prior to processing (only 90 degree intervals) (new in V3.1).
rotate=degrees – Rotates the image any arbitrary angle (occurs after cropping).
flip=none|x|y|xy - Flips the image after everything is done.
Manual cropping
crop=(x1,y1,x2,y2) – Crop the image to the specified rectangle on the source image. You can use negative coordinates to specify bottom-right relative locations.
cropxunits The width which the x1 and x2 coordinates are relative to, e.g., use '100' to make x1 and x2 percentages. Useful when you don't know the original image size.
cropyunits The height which the y1 and y2 coordinates are relative to, e.g., use '100' to make y1 and y2 percentages. Useful when you don't know the original image size.
Sizing (and padding, autocropping, carving and stretching)
Please note that width/height/maxwidth/maxheight do NOT include border, margin, or padding widths, and do not include the extra space used by rotation. They constrain the image, not the canvas.</p>
<p>maxwidth, maxheight – Fit the image within the specified bounds, preserving aspect ratio.
width, height – Force the final width and/or height to certain dimensions. Whitespace will be added if the aspect ratio is different.
mode=max|pad|crop|carve|stretch - How to handle aspect-ratio conflicts between the image and width+height. 'pad' adds whitespace, 'crop' crops minimally, 'carve' uses seam carving, 'stretch' loses aspect-ratio, stretching the image. 'max' behaves like maxwidth/maxheight (new in V3.1).
anchor=topleft|topcenter|topright|middleleft|middlecenter|middleright|bottomleft|bottomcenter|bottomright How to anchor the image when padding or cropping (new in V3.1).
scale=both|upscaleonly|downscaleonly|upscalecanvas – By default, images are never upscaled. Use &amp;scale=both to upscale images if they are smaller than width and height.
zoom=0..infinity - Scale the image by a multiplier. Useful for mobile devices and situations where you need to retain all the existing width/height/crop settings, but scale the result up or down. Defaults to 1. 0.5 produces a half-size image, 2 produces a double-size image.
Border, padding, margins and background colors
bgcolor=color name | hex code (6-char). Sets the background/whitespace color.
margin=3 or margin=5,5,10,10 Specify a universal margin or left,top,right,bottom widths (new in V3.1.
Output format
format=jpg|png|gif - The output format to use.
quality - Jpeg compression: 0-100 100=best, 90=very good balance, 0=ugly.</p>
<p>Watermark plugin
watermark - The name of one or more watermark layers (or layer groups) to render.</p>
<p>SimpleFilters plugin
&amp;s.grayscale=true|y|ry|ntsc|bt709|flat (true, ntsc, and y produce identical results)
&amp;s.sepia=true
&amp;s.alpha= 0..1
&amp;s.brightness=-1..1
&amp;s.contrast=-1..1
&amp;s.saturation=-1..1
&amp;s.invert=true</p>
<p>trim.threshold=80 - The threshold to use for trimming whitespace.
trim.percentpadding=0.5 - The percentage of padding to restore after trimming.</p>
<h1><a class="header" href="#json-api-reference" id="json-api-reference">JSON API Reference</a></h1>
<h2><a class="header" href="#node-reference" id="node-reference">Node Reference</a></h2>
<h3><a class="header" href="#constraint-modes" id="constraint-modes">Constraint Modes</a></h3>
<ul>
<li><code>distort</code> Distort the image to exactly the given dimensions.
If only one dimension is specified, behaves like <code>fit</code>.</li>
<li><code>within</code>
Ensure the result fits within the provided dimensions. No upscaling.</li>
<li><code>fit</code>
Fit the image within the dimensions, upscaling if needed</li>
<li><code>larger_than</code>
Ensure the image is larger than the given dimensions</li>
<li><code>within_crop</code>
Crop to desired aspect ratio if image is larger than requested, then downscale. Ignores smaller images.
If only one dimension is specified, behaves like <code>within</code>.</li>
<li><code>fit_crop</code>
Crop to desired aspect ratio, then downscale or upscale to fit.
If only one dimension is specified, behaves like <code>fit</code>.</li>
<li><code>aspect_crop</code>
Crop to desired aspect ratio, no upscaling or downscaling. If only one dimension is specified, behaves like Fit.</li>
<li><code>within_pad</code>
Pad to desired aspect ratio if image is larger than requested, then downscale. Ignores smaller images.
If only one dimension is specified, behaves like <code>within</code></li>
<li><code>fit_pad</code>
Pad to desired aspect ratio, then downscale or upscale to fit
If only one dimension is specified, behaves like <code>fit</code>.</li>
</ul>
<h3><a class="header" href="#resampling-filters" id="resampling-filters">Resampling Filters</a></h3>
<ul>
<li><code>robidoux</code> - The default and recommended downsampling filter</li>
<li><code>robidoux_sharp</code> - A sharper version of the above</li>
<li><code>robidoux_fast</code> - A faster, less accurate version of robidoux</li>
<li><code>ginseng</code> - The default and suggested upsampling filter</li>
<li><code>ginseng_sharp</code> </li>
<li><code>lanczos</code> </li>
<li><code>lanczos_sharp</code></li>
<li><code>lanczos_2</code> </li>
<li><code>lanczos_2_sharp</code></li>
<li><code>cubic</code> </li>
<li><code>cubic_sharp</code> </li>
<li><code>catmull_rom</code> </li>
<li><code>mitchell</code> </li>
<li><code>cubic_b_spline</code> </li>
<li><code>hermite</code> </li>
<li><code>jinc</code> </li>
<li><code>triangle</code> </li>
<li><code>linear</code> </li>
<li><code>box</code> </li>
<li><code>fastest</code> </li>
<li><code>n_cubic</code> </li>
<li><code>n_cubic_sharp</code> </li>
</ul>
<h3><a class="header" href="#colors" id="colors">Colors</a></h3>
<ul>
<li><code>transparent</code></li>
<li><code>black</code></li>
<li><code>{ &quot;srgb&quot;: { &quot;hex&quot; : &quot;ffffff&quot; } }</code></li>
</ul>
<h3><a class="header" href="#resampling-hints" id="resampling-hints">Resampling Hints</a></h3>
<ul>
<li><code>sharpen_percent</code> (0..100) The amount of sharpening to apply during resampling</li>
<li><code>up_filter</code> The resampling filter to use if upscaling in one or more directions</li>
<li><code>down_filter</code> The resampling filter to use if downscaling in both directions.</li>
<li><code>scaling_colorspace</code> Use <code>linear</code> for the best results, or <code>srgb</code> to mimick poorly-written software. <code>srgb</code> can destroy image highlights.</li>
<li><code>background_color</code> The background color to apply. </li>
<li><code>resample_when</code> One of <code>size_differs</code>, <code>size_differs_or_sharpening_requested</code>, or <code>always</code>.</li>
<li><code>sharpen_when</code> One of <code>downscaling</code>, <code>upscaling</code>, <code>size_differs</code>, or <code>always</code></li>
</ul>
<pre><code class="language-json">{ 
  &quot;sharpen_percent&quot;: 15,
  &quot;down_filter&quot;:  &quot;robidoux&quot;,
  &quot;up_filter&quot;: &quot;ginseng&quot;,
  &quot;scaling_colorspace&quot;: &quot;linear&quot;,
  &quot;background_color&quot;: &quot;transparent&quot;,
  &quot;resample_when&quot;: &quot;size_differs_or_sharpening_requested&quot;,
  &quot;sharpen_when&quot;: &quot;downscaling&quot;
}
</code></pre>
<h3><a class="header" href="#watermark" id="watermark">Watermark</a></h3>
<ul>
<li><code>io_id</code> (<strong>required</strong>) specifies which input image to use as a watermark. </li>
<li><code>gravity</code> determines how the image is placed within the <code>fit_box</code>. 
<code>{x: 0, y: 0}</code> represents top-left, <code>{x: 50, y: 50}</code> represents center, 
<code>{x:100, y:100}</code> represents bottom-right. <em>Default: <code>center</code></em></li>
<li><code>fit_mode</code> is one of <code>distort</code>, <code>within</code>, <code>fit</code>, <code>within_crop</code>, or <code>fit_crop</code>. 
Meanings are the same as for <a href="json_api_reference.html#constraint-modes">constraint modes</a>. <em>Default: <code>within</code></em></li>
<li><code>fit_box</code> can be either <code>image_percentage</code> (a box represented by percentages of target image width/height) or 
<code>image_margins</code> (a box represented by pixels from the edge of the image). <em>Default <code>image_margins</code> 0</em></li>
<li><code>opacity</code> (0..1) How opaque to draw the image. <em>Default 1.0</em></li>
<li><code>hints</code> See <a href="json_api_reference.html#resampling-hints">resampling hints</a></li>
</ul>
<h4><a class="header" href="#example-with-fit_box-image_percentage" id="example-with-fit_box-image_percentage">Example with fit_box: image_percentage</a></h4>
<p>This will align the watermark to 10% from the bottom and right edges of the image, 
scaling the watermark down if it takes more than 80% of the image space,
drawing it at 80% opacity and applying 15% sharpening.</p>
<pre><code class="language-json">{
  &quot;watermark&quot;: {
    &quot;io_id&quot;: 1,
    &quot;gravity&quot;: { 
      &quot;percentage&quot; : {
        &quot;x&quot;: 100,
        &quot;y&quot;: 100 
      }
    },
    &quot;fit_mode&quot;: &quot;within&quot;,
    &quot;fit_box&quot;: { 
      &quot;image_percentage&quot;: {
        &quot;x1&quot;: 10,
        &quot;y1&quot;: 10,
        &quot;x2&quot;: 90,
        &quot;y2&quot;: 90
      } 
    },
    &quot;opacity&quot;: 0.8,
    &quot;hints&quot;: {
      &quot;sharpen_percent&quot;: 15
    }
  }
}
</code></pre>
<h4><a class="header" href="#example-with-fit_box-image_margins" id="example-with-fit_box-image_margins">Example with fit_box: image_margins</a></h4>
<p>This will stretch/distort the watermark to fill the image except for a 5px margin.</p>
<pre><code class="language-json">{
  &quot;watermark&quot;: {
    &quot;io_id&quot;: 1,
    &quot;gravity&quot;: { &quot;center&quot;: null },
    &quot;fit_mode&quot;: &quot;distort&quot;,
    &quot;fit_box&quot;: { 
      &quot;image_margins&quot;: {
        &quot;left&quot;: 5,
        &quot;top&quot;: 5,
        &quot;right&quot;: 5,
        &quot;bottom&quot;: 5
      } 
    }
  }
}
</code></pre>
<h3><a class="header" href="#constrain" id="constrain">Constrain</a></h3>
<ul>
<li><code>w</code> The width constraint in pixels</li>
<li><code>h</code> The height constraint in pixels</li>
<li><code>mode</code> A <a href="json_api_reference.html#constraint-modes">constraint mode</a></li>
<li><code>gravity</code> determines how the image is anchored when cropped or padded. 
<code>{x: 0, y: 0}</code> represents top-left, <code>{x: 50, y: 50}</code> represents center, 
<code>{x:100, y:100}</code> represents bottom-right. <em>Default: <code>center</code></em></li>
<li><code>hints</code> See <a href="json_api_reference.html#resampling-hints">resampling hints</a></li>
<li><code>canvas_color</code> See <a href="json_api_reference.html#colors">Color</a>. The color of padding added to the image. </li>
</ul>
<pre><code class="language-json">{ 
  &quot;constrain&quot;: {
    &quot;mode&quot;: &quot;within&quot;,
    &quot;w&quot;: 800,
    &quot;h&quot;: 600,
    &quot;hints&quot;: {
      &quot;sharpen_percent&quot;: 7 
    },
    &quot;gravity&quot;: { &quot;percentage&quot;:  { &quot;x&quot;:  50, &quot;y&quot;:  50}},
    &quot;canvas_color&quot;: &quot;transparent&quot;
  }
}
</code></pre>
<h1><a class="header" href="#chapter-1" id="chapter-1">Chapter 1</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
